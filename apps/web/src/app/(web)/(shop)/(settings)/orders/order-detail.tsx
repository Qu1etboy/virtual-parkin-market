"use client";

import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";
import { FILE_URL } from "@/services/upload";
import {
  Delivery,
  DeliveryImage,
  Order,
  OrderItem,
  OrderStatus,
  Product,
  Store,
} from "@prisma/client";
import React from "react";

type OrderDetailProps = {
  order: Order & {
    delivery:
      | (Delivery & {
          deliveryImages: DeliveryImage[];
        })
      | null;
    store: Store;
    orderItem: OrderItem & {
      product: Product;
    };
  };
};

const title = {
  PENDING: "‡∏Å‡πç‡∏≤‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",
  PACKED: "‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á",
  SHIPPED: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÉ‡∏ô 2 - 3 ‡∏ß‡∏±‡∏ô",
  DELIVERED: "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß üéâ",
  CANCELLED: "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",
};

export default function OrderDetail({ order }: OrderDetailProps) {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <button onClick={() => console.log(order.delivery)}>
          ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡πç‡∏≤‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
        </button>
      </DialogTrigger>
      <DialogContent className="w-full max-w-3xl max-h-[80%] overflow-auto">
        <DialogHeader>
          <DialogTitle>{title[order.status]}</DialogTitle>
          {order.delivery ? (
            <div>
              <h2 className="mt-6">‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
              <div className="flex gap-2">
                {order.delivery?.deliveryImages.map((image) => (
                  <img
                    key={image.id}
                    src={`${FILE_URL}/${image.image}`}
                    width="200"
                  />
                ))}
              </div>
            </div>
          ) : null}
        </DialogHeader>
      </DialogContent>
    </Dialog>
  );
}
